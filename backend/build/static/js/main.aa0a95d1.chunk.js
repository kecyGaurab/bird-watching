(this["webpackJsonpbirds-app"]=this["webpackJsonpbirds-app"]||[]).push([[0],{171:function(e,t,a){e.exports=a(221)},221:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),i=a(23),l=a(18),u=a(274),s=a(272),m=a(60),d=a(133),p=a(134),f=a(7),b=a.n(f),g=a(13),E=a(8),h=a(45),v=a.n(h),y="/api/birds",j=function(e){return"bearer ".concat(e)},O=function(){var e=Object(g.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(y);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(y,"/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(g.a)(b.a.mark((function e(t,a,n){var r,c,o,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in r=j(n),(c=new FormData).append("image",a),t)c.append(o,t[o]);return i={headers:{authorization:r}},e.next=7,v.a.post("".concat(y),c,i);case 7:return l=e.sent,e.abrupt("return",l.data);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(b.a.mark((function e(t,a,n,r){var c,o,i,l,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l in c=j(r),o={headers:{authorization:c}},i=new FormData,null!==n&&i.append("imageToUpdate",n),a)i.append(l,a[l]);return e.next=7,v.a.put("".concat(y,"/").concat(t),i,o);case 7:return u=e.sent,e.abrupt("return",u.data);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),k={get:w,getAll:O,create:x,remove:function(){var e=Object(g.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(a),e.next=3,v.a.delete("".concat(y,"/").concat(t),{headers:{Authorization:n}});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),update:C,setToken:j},S={birds:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BIRD":return Object(E.a)(Object(E.a)({},e),{},{bird:t.payload});case"INIT_BIRDS":return Object(E.a)(Object(E.a)({},e),{},{birds:t.payload});case"ADD_BIRD":return Object(E.a)(Object(E.a)({},e),{},{birds:e.birds.concat(t.payload)});case"EDIT_BIRD":var a=t.payload.id;return Object(E.a)(Object(E.a)({},e),{},{birds:e.birds.filter((function(e){return e.id!==a})).concat(t.payload),bird:t.payload});case"REMOVE_BIRD":return Object(E.a)(Object(E.a)({},e),{},{birds:e.birds.filter((function(e){return e.id!==t.payload}))});default:return e}},I=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(a){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.get(e);case 2:n=t.sent,a({type:"GET_BIRD",payload:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R={currentUser:null},U=function(e){return function(){var t=Object(g.a)(b.a.mark((function t(a){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.localStorage.setItem("loggedUser",JSON.stringify(e)),a({type:"SET_CURRENT_USER",payload:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":case"REMOVE_CURRENT_USER":return Object(E.a)(Object(E.a)({},e),{},{currentUser:t.payload});default:return e}},T=Object(m.combineReducers)({observations:D,user:B}),N=Object(m.createStore)(T,Object(p.composeWithDevTools)(Object(m.applyMiddleware)(d.a))),M=a(21),F=a(42),W=a(20),A=a(82),P=a.n(A),_=a(228),z=a(77),L=a(260),V=a(256),q=a(31),G=a(158),J=a(282),Y=a(276),Q=a(283),K=a(284),H=a(140),X=a.n(H),Z=a(141),$=a.n(Z),ee=a(142),te=a.n(ee),ae=a(155),ne=a(138),re=a.n(ne),ce=a(139),oe=a.n(ce),ie=function(e){var t=e.handleImageChange,a=e.imageName,n=e.clearImage,c=e.uploadButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{style:{display:"none"},accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",value:void 0,onChange:t}),r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(z.a,{startIcon:r.a.createElement(re.a,null),variant:"contained",color:"secondary",component:"span"},c),a||null,r.a.createElement(ae.a,{style:{display:a?"inline":"none"},type:"reset",onClick:n},r.a.createElement(oe.a,null))))},le=a(150),ue=a(22),se=a(257),me=a(286),de=function(e){var t=e.date,a=e.handleDateChange;return r.a.createElement(ue.a,{utils:le.a},r.a.createElement(V.a,{container:!0,justify:"space-between"},r.a.createElement(se.a,{margin:"normal",id:"date-picker-dialog",label:"Choose Date",format:"MM/dd/yyyy",value:t,onChange:a,KeyboardButtonProps:{"aria-label":"change date"}}),r.a.createElement(me.a,{margin:"normal",id:"time-picker",label:"Choose Time",value:t,onChange:a,KeyboardButtonProps:{"aria-label":"change time"}})))},pe=function(e){var t=e.onSubmit,a=e.handleChange,n=e.handleRarityChange,c=e.handleImageChange,o=e.handleDateChange,l=e.handleLocation,u=e.bird,s=e.image,m=e.imageName,d=e.locationReset,p=e.title,f=e.redirectTo,b=e.clearImage,g=e.uploadButton;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{open:!0,disablePortal:!0,disableEnforceFocus:!0},r.a.createElement(i.b,{"data-testid":"close-dialog",align:"right",style:{textDecoration:"none"},to:f},r.a.createElement(z.a,null,r.a.createElement(X.a,null))),r.a.createElement(L.a,null,r.a.createElement(V.a,{container:!0,spacing:4,justify:"space-between",direction:"column",alignItems:"center"},r.a.createElement(V.a,{item:!0},r.a.createElement(q.a,{variant:"h6"},p)),r.a.createElement(V.a,{item:!0},r.a.createElement("form",{onSubmit:t},r.a.createElement(V.a,{container:!0,direction:"column",spacing:1},r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(G.a,{fullWidth:!0,onChange:a,variant:"outlined",type:"text",label:"Name",name:"commonname",value:u.commonname,autoFocus:!0})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(G.a,{fullWidth:!0,onChange:a,variant:"outlined",type:"text",label:"Species",name:"species",value:u.species})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(J.a,{htmlFor:"rarity-select"},"Choose rarity:"),r.a.createElement(Y.a,{fullWidth:!0,color:"secondary",variant:"standard",inputProps:{id:"rarity-select"},defaultValue:"common",onChange:n},r.a.createElement(Q.a,{value:"common"},"common"),r.a.createElement(Q.a,{value:"rare"},"rare"),r.a.createElement(Q.a,{value:"extremely-rare"},"extremely rare"))),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(ie,{clearImage:b,handleImageChange:c,bird:u,imageName:m,uploadButton:g})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(de,{handleDateChange:o,date:u.date})),r.a.createElement(V.a,{item:!0},r.a.createElement(z.a,{size:"small",variant:"outlined",onClick:l,endIcon:r.a.createElement($.a,null)},"Add location"),r.a.createElement(K.a,{variant:"outlined",color:"primary",size:"medium",label:0===u.lat&&0===u.long?"location not added":"remove location",onClick:d,deleteIcon:r.a.createElement(te.a,null)})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(z.a,{disabled:!u.commonname||!u.rarity||null===s||"File Not Found"===s,type:"submit",variant:"outlined"},"Submit")))))))))},fe=function(){var e=Object(n.useState)({}),t=Object(W.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(W.a)(c,2),i=o[0],l=o[1],u=function(e){var t=e.coords;r({latitude:t.latitude,longitude:t.longitude})},s=function(e){l(e.message)};return Object(n.useEffect)((function(){var e=navigator.geolocation;if(e){var t=e.watchPosition(u,s);return function(){return e.clearWatch(t)}}l("Geolocation is not supported")}),[]),Object(E.a)(Object(E.a)({},a),{},{navError:i})},be=Object(l.b)(null,{createBird:function(e,t,a){return function(){var n=Object(g.a)(b.a.mark((function n(r){var c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,k.create(e,t,a);case 2:c=n.sent,r({type:"ADD_BIRD",payload:c});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})(Object(M.f)((function(e){var t=e.createBird,a=e.history,c=fe(),o=c.latitude,i=c.longitude,u=Object(l.d)((function(e){return e.user})).currentUser.token,s=Object(n.useState)({commonname:"",species:"",rarity:[],lat:0,long:0,date:new Date}),m=Object(W.a)(s,2),d=m[0],p=m[1];console.log("bird",d);var f=Object(n.useState)(null),h=Object(W.a)(f,2),v=h[0],y=h[1];console.log("image",v);var j=Object(n.useState)(""),O=Object(W.a)(j,2),w=O[0],x=O[1],C=function(e){return new Promise((function(t){P.a.imageFileResizer(e,240,190,"JPEG",100,0,(function(e){t(e)}),"blob")}))},k=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=t.target.files[0])){e.next=7;break}return e.next=4,C(a);case 4:n=e.sent,y(n),x(a.name);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var S=function(){var e=Object(g.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault();try{t(d,v,u)}catch(r){console.log("error",r)}a.push("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{"data-testid":"addBird",onSubmit:S,handleChange:function(e){e.preventDefault(),p(Object(E.a)(Object(E.a)({},d),{},Object(F.a)({},e.target.name,e.target.value)))},handleRarityChange:function(e){p(Object(E.a)(Object(E.a)({},d),{},{rarity:e.target.value}))},handleImageChange:k,handleLocation:function(e){e.preventDefault(),window.confirm("Are you sure you want to add location?")&&p(Object(E.a)(Object(E.a)({},d),{},{lat:o,long:i}))},handleDateChange:function(e){p(Object(E.a)(Object(E.a)({},d),{},{date:e}))},bird:d,image:v,imageName:w,clearImage:function(){y(null),x(null)},locationReset:function(){p(Object(E.a)(Object(E.a)({},d),{},{lat:0,long:0}))},title:"Enter new observation",redirectTo:"/",uploadButton:"upload"}))}))),ge=a(271),Ee=a(262),he=a(263),ve=a(264),ye=a(265),je=a(266),Oe=a(267),we=a(268),xe=a(275),Ce=a(143),ke=a(145),Se=a.n(ke),De=a(144),Ie=a.n(De),Re=a(224),Ue=a(223),Be=a(261),Te=function(e){var t=e.title,a=e.children,n=e.open,c=e.setOpen,o=e.onConfirm;return r.a.createElement(_.a,{open:n,onClose:function(){return c(!1)},"aria-labelledby":"confirm-dialog"},r.a.createElement(Be.a,{id:"confirm-dialog"},t),r.a.createElement(Ue.a,null,a),r.a.createElement(Re.a,null,r.a.createElement(z.a,{variant:"contained",onClick:function(){return c(!1)},color:"secondary"},"No"),r.a.createElement(z.a,{"data-testid":"confirm-delete",variant:"contained",onClick:function(){c(!1),o()},color:"default"},"Yes")))},Ne=Object(l.b)(null,{removeBird:function(e,t){return function(){var a=Object(g.a)(b.a.mark((function a(n){return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,k.remove(e,t);case 2:n({type:"REMOVE_BIRD",payload:e});case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})(Object(M.f)((function(e){var t=null,a=null,c=Object(l.d)((function(e){return e.user})).currentUser;c&&(t=c.token,a=c.username);var o=e.history,u=e.location,s=e.bird,m=e.removeBird,d=s.id,p=Object(n.useState)(!1),f=Object(W.a)(p,2),E=f[0],h=f[1],v=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m(d,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error",e.t0);case 8:o.push("/");case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(V.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(V.a,{item:!0,xs:9},r.a.createElement(q.a,{variant:"body1"},s.commonname)),u.pathname==="/".concat(d)&&s.username===a?r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{item:!0,xs:1},r.a.createElement(i.b,{"data-testid":"edit-bird",to:"/".concat(d,"/edit")},r.a.createElement(ae.a,null,r.a.createElement(Ie.a,null)))),r.a.createElement(V.a,{item:!0,xs:1},r.a.createElement(ae.a,{"data-testid":"delete-bird",onClick:function(){return h(!0)}},r.a.createElement(Se.a,null)),r.a.createElement(Te,{title:"Delete Observation?",open:E,setOpen:h,onConfirm:v},"Are you sure you want to delete this observation?"))):null)}))),Me=Object(M.f)((function(e){var t=e.bird,a=e.location;function n(e,t){return{categories:e,values:t}}var c,o=[n("Species","".concat(t.species)),n("Rarity","".concat(t.rarity)),n("Time","".concat((c=t.date,Ce(new Date(c)).format("MMMM Do YYYY, h:mm a")))),n("Location","".concat(t&&0===t.lat?"Not added":"".concat(t.lat.toFixed(2),"N, ").concat(t.long.toFixed(2),"E ")))];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee.a,{style:{height:"495px"},elevation:10},r.a.createElement(he.a,{title:r.a.createElement(Ne,{bird:t})}),r.a.createElement(ve.a,{image:t.imageUrl}),r.a.createElement(L.a,null,r.a.createElement(ye.a,{container:"paper",size:"small"},r.a.createElement(je.a,null,o.map((function(e,t){return r.a.createElement(Oe.a,{key:t},r.a.createElement(we.a,{component:"th",scope:"row"},r.a.createElement(xe.a,{fontWeight:"fontWeightBold"},e.categories)),r.a.createElement(we.a,{align:"left"},e.values))})),"/"===a.pathname?r.a.createElement(Oe.a,null,r.a.createElement(we.a,null,r.a.createElement(i.b,{"data-testid":"".concat(t.id),underline:"none",to:"/".concat(t.id)},"Details")),r.a.createElement(we.a,null,r.a.createElement(q.a,{variant:"caption"},"Added by \xa0",t.username))):null)))))})),Fe=a(270),We=a(225),Ae=a(226),Pe=a(269),_e=a(146),ze=a.n(_e),Le=a(285),Ve=function(e){var t=e.username,a=e.handleLogout,n=t&&t.charAt(0).toUpperCase();return r.a.createElement(V.a,{container:!0,direction:"row"},r.a.createElement(V.a,{item:!0},r.a.createElement(Le.a,null,n)),r.a.createElement(V.a,{item:!0},r.a.createElement(z.a,{onClick:a},"Logout")))},qe=Object(l.b)((function(e){return{user:e.user.currentUser}}),{removeUser:function(){return function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedUser"),t({type:"REMOVE_CURRENT_USER",payload:null});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.query,a=e.handleQueryChange,n=e.user,c=e.removeUser,o=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log("error",e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(V.a,{container:!0,direction:"row",alignItems:"center",spacing:2,justify:"center"},r.a.createElement(V.a,{item:!0},r.a.createElement(G.a,{size:"large",fullWidth:!0,id:"outlined-search",type:"search",variant:"outlined",placeholder:"Search for observations",onChange:a,value:t,InputProps:{startAdornment:r.a.createElement(Ae.a,{position:"start"},r.a.createElement(ze.a,null))}})),r.a.createElement(V.a,{item:!0},null!==n?r.a.createElement(Ve,{username:n.username,handleLogout:o}):r.a.createElement(Pe.a,{href:"/login",variant:"body1"},r.a.createElement(z.a,null,"Login"))))})),Ge=Object(M.f)((function(e){var t=e.handleQueryChange,a=e.query,n=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,{color:"primary",position:"static"},r.a.createElement(We.a,null,r.a.createElement(V.a,{container:!0,justify:"space-between"},r.a.createElement(V.a,{item:!0,xs:3,align:"right"},r.a.createElement(i.b,{style:{textDecoration:"none"},to:"/"},r.a.createElement(xe.a,{fontWeightBold:!0},r.a.createElement(q.a,{variant:"h3",color:"primary"},"Birds")))),"/"===n.pathname?r.a.createElement(V.a,{item:!0,xs:5,align:"right"},r.a.createElement(qe,{query:a,handleQueryChange:t})):null))))})),Je=Object(l.b)((function(e){return{birds:e.observations.birds,user:e.user}}))(Object(M.f)((function(e){var t=Object(n.useState)(""),a=Object(W.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),s=Object(W.a)(u,2),m=s[0],d=s[1],p=e.birds,f=e.user,E=Object(l.c)();Object(n.useEffect)((function(){E(function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.getAll();case 2:a=e.sent,t({type:"INIT_BIRDS",payload:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[E]),Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedUser");if(e){var t=JSON.parse(e);E(U(t))}}),[E]),Object(n.useEffect)((function(){!function(){var e=p.filter((function(e){return e.commonname.toLowerCase().startsWith(c.toLowerCase())}));d(e)}()}),[c,p]);var h=p.sort((function(e,t){return new Date(t.date)-new Date(e.date)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge,{query:c,handleQueryChange:function(e){o(e.target.value)}}),r.a.createElement(ge.a,null,r.a.createElement(V.a,{justify:"space-around",container:!0,direction:"row",spacing:5},r.a.createElement(V.a,{item:!0,xs:12,align:"center"},r.a.createElement(i.b,{style:{textDecoration:"none"},to:f.currentUser?"/add":"/login"},r.a.createElement(z.a,{size:"large",color:"primary",variant:"outlined"},"Add New Observation"))),m?m.map((function(e){return r.a.createElement(V.a,{key:e.id,item:!0,xs:12,md:3},r.a.createElement(Me,{bird:e}))})):h&&h.map((function(e){return r.a.createElement(V.a,{key:e.id,item:!0,xs:12,md:3},r.a.createElement(Me,{bird:e}))})))))}))),Ye=a(149),Qe=a.n(Ye),Ke=a(147),He=a.n(Ke),Xe=a(148);a.n(Xe).a.config();var Ze=function(e){var t=e.latitude,a=e.longitude;return r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement(He.a,{bootstrapURLKeys:{key:"AIzaSyBzFco2Inn3XVVM-Z7eEc-EybtTXAVwMGU"},defaultCenter:{lat:t,lng:a},defaultZoom:11,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,n){return new n.Marker({position:{lat:t,lng:a},map:e,title:"Hello World!"})}(e.map,e.maps)}}))},$e=Object(l.b)((function(e){return{bird:e.observations.bird}}),{getBird:I})(Object(M.f)((function(e){var t=Object(l.c)(),a=e.match,c=e.bird,o=a.params.id;return Object(n.useEffect)((function(){t(I(o))}),[t,o]),c?r.a.createElement(xe.a,null,r.a.createElement(Ge,null),r.a.createElement(ge.a,null,r.a.createElement(i.b,{to:"/"},r.a.createElement(z.a,null,r.a.createElement(Qe.a,null),"Back")),r.a.createElement(V.a,{container:!0,direction:"row",justify:"space-around",alignContent:"center"},r.a.createElement(V.a,{item:!0}),r.a.createElement(V.a,{item:!0,xs:3},r.a.createElement(Me,{bird:c})),r.a.createElement(V.a,{item:!0,xs:9},r.a.createElement(Ze,{latitude:c.lat,longitude:c.long}))))):r.a.createElement("p",null,"loading")}))),et=Object(l.b)((function(e){return{bird:e.observations.bird}}),{editBird:function(e,t,a,n){return function(){var r=Object(g.a)(b.a.mark((function r(c){var o;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k.update(e,t,a,n);case 2:o=r.sent,c({type:"EDIT_BIRD",payload:o});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})(Object(M.f)((function(e){var t=Object(l.d)((function(e){return e.user.currentUser.token})),a=fe(),c=a.latitude,o=a.longitude,i=e.match,u=e.bird,s=e.history,m=i.params.id,d=u.commonname,p=u.species,f=u.rarity,h=u.lat,v=u.long,y=u.public_id,j=u.version,O=u.imageUrl,w=Object(n.useState)(null),x=Object(W.a)(w,2),C=x[0],k=x[1],S=Object(n.useState)(""),D=Object(W.a)(S,2),I=D[0],R=D[1],U=Object(n.useState)({commonname:d,species:p,rarity:f,lat:void 0===h?0:h,long:void 0===v?0:v,public_id:y,imageUrl:O,version:j,date:u.date}),B=Object(W.a)(U,2),T=B[0],N=B[1];console.log("birdToEdit",T);var M=function(e){return new Promise((function(t){P.a.imageFileResizer(e,240,190,"JPEG",100,0,(function(e){t(e)}),"blob")}))},A=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.files[0],e.next=4,M(a);case 4:n=e.sent,k(n),R(a.name);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pe,{onSubmit:function(a){a.preventDefault(),e.editBird(m,T,C,t).then(s.push("/".concat(m)))},handleChange:function(e){e.preventDefault(),N(Object(E.a)(Object(E.a)({},T),{},Object(F.a)({},e.target.name,e.target.value)))},handleDateChange:function(e){N(Object(E.a)(Object(E.a)({},T),{},{date:e}))},handleRarityChange:function(e){N(Object(E.a)(Object(E.a)({},T),{},{rarity:e.target.value}))},handleImageChange:A,handleLocation:function(e){e.preventDefault(),window.confirm("Are you sure you want to add location?")&&N(Object(E.a)(Object(E.a)({},T),{},{lat:c,long:o}))},bird:T,imageName:I,locationReset:function(){N(Object(E.a)(Object(E.a)({},T),{},{lat:0,long:0}))},title:"Edit observation",redirectTo:"/".concat(m),uploadButton:"change image"}))}))),tt=a(273),at=a(279),nt=a(96),rt=a.n(nt),ct=a(277),ot={login:function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},it=Object(l.b)(null,{setCurrentUser:U})(Object(M.f)((function(e){var t=e.setCurrentUser,a=e.history,c=Object(n.useState)(""),o=Object(W.a)(c,2),i=o[0],l=o[1],u=Object(n.useState)({username:"",password:""}),m=Object(W.a)(u,2),d=m[0],p=m[1],f=function(e){e.preventDefault(),p(Object(E.a)(Object(E.a)({},d),{},Object(F.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(g.a)(b.a.mark((function e(n){var r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,ot.login(d);case 4:r=e.sent,t(r),p({username:"",password:""}),a.push("/"),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),c=e.t0.response.data.error,l(c),setTimeout((function(){l("")}),3e3);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ge.a,{component:"main",maxWidth:"xs"},r.a.createElement(s.a,null),r.a.createElement(V.a,{container:!0,direction:"column",justify:"center"},r.a.createElement(V.a,{item:!0,align:"center"},r.a.createElement(Le.a,null,r.a.createElement(rt.a,null))),r.a.createElement(V.a,{item:!0,align:"center"},r.a.createElement(q.a,{component:"h1",variant:"h5"},"Sign in"))),i?r.a.createElement(ct.a,{variant:"outlined",severity:"error"},i):null,r.a.createElement("form",{onSubmit:h,noValidate:!0},r.a.createElement(G.a,{fullWidth:!0,inputProps:{"data-testid":"username"},id:"outlined-name",autoComplete:"username",label:"Username",name:"username",value:d.username,margin:"normal",variant:"outlined",onChange:f}),r.a.createElement(G.a,{fullWidth:!0,inputProps:{"data-testid":"password"},label:"Password",name:"password",value:d.password,onChange:f,type:"password",autoComplete:"current-password",margin:"normal",variant:"outlined"}),r.a.createElement(tt.a,{control:r.a.createElement(at.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(z.a,{"data-testid":"submit",type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign In"),r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(Pe.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(V.a,{item:!0},r.a.createElement(Pe.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up")))))}))),lt={signup:function(){var e=Object(g.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=Object(l.b)(null,{setCurrentUser:U})(Object(M.f)((function(e){var t=e.history,a=Object(n.useState)({firstName:"",lastName:"",username:"",password:"",confirmPassword:""}),c=Object(W.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),u=Object(W.a)(l,2),m=u[0],d=u[1],p=function(e){i(Object(E.a)(Object(E.a)({},o),{},Object(F.a)({},e.target.name,e.target.value)))},f=function(){var e=Object(g.a)(b.a.mark((function e(a){var n,r,c,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=o.firstName,r=o.lastName,c=o.username,i=o.password,l=o.confirmPassword,n||r||c||i||l){e.next=6;break}return d("Please fill all the fields"),setTimeout((function(){d("")}),5e3),e.abrupt("return");case 6:if(i===l){e.next=10;break}return d("Please make sure the passwords match"),setTimeout((function(){d("")}),5e3),e.abrupt("return");case 10:return e.prev=10,e.next=13,lt.signup(o);case 13:t.push("/login"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(10),d("Username already taken"),setTimeout((function(){d("")}),5e3);case 20:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ge.a,{component:"main",maxWidth:"xs"},r.a.createElement(s.a,null),r.a.createElement(V.a,{container:!0,direction:"column",justify:"center",spacing:2},r.a.createElement(V.a,{item:!0,align:"center"},r.a.createElement(Le.a,null,r.a.createElement(rt.a,null))),r.a.createElement(V.a,{item:!0,align:"center"},r.a.createElement(q.a,{component:"h1",variant:"h5"},"Sign Up"))),r.a.createElement("form",{onSubmit:f,noValidate:!0},r.a.createElement(V.a,{container:!0,spacing:2},r.a.createElement(V.a,{item:!0,xs:12},m?r.a.createElement(ct.a,{variant:"outlined",severity:"error"},m):null),r.a.createElement(V.a,{item:!0,xs:12,sm:6},r.a.createElement(G.a,{autoComplete:"fname",name:"firstName",value:o.firstName,variant:"outlined",required:!0,fullWidth:!0,onChange:p,label:"First Name",autoFocus:!0})),r.a.createElement(V.a,{item:!0,xs:12,sm:6},r.a.createElement(G.a,{variant:"outlined",required:!0,fullWidth:!0,onChange:p,id:"lastName",label:"Last Name",name:"lastName",value:o.lastName,autoComplete:"lname"})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(G.a,{variant:"outlined",required:!0,fullWidth:!0,label:"Username",name:"username",onChange:p,value:o.username,autoComplete:"username"})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(G.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",onChange:p,label:"Password",type:"password",value:o.password,autoComplete:"current-password"})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(G.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmPassword",onChange:p,label:"confirm password",type:"password",value:o.confirmPassword,autoComplete:"current-password"}))),r.a.createElement(z.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign Up"),r.a.createElement(V.a,{container:!0,justify:"flex-end"},r.a.createElement(V.a,{item:!0},r.a.createElement(Pe.a,{href:"/login",variant:"body2"},"Already have an account? Sign in")))))}))),st=Object(M.f)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(M.a,{exact:!0,path:["/","/add"],component:Je}),r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/signup",component:ut}),r.a.createElement(M.a,{exact:!0,path:"/login",component:it}),r.a.createElement(M.a,{exact:!0,path:"/add",component:be}),r.a.createElement(M.a,{path:"/:id",component:$e})),r.a.createElement(M.a,{path:"/:id/edit",component:et}))})),mt=a(97),dt=a(151),pt=Object(dt.a)({palette:{primary:{main:"#002884",dark:"#002884"},secondary:{main:"#19857b"},error:{main:mt.a.A400},background:{default:"#f5f5f5"}}});pt.overrides={MuiCard:{root:{borderRadius:"10px"}},MuiContainer:{root:{padding:"10px 0"}},MuiTextField:{root:{fontSize:"10px",borderRadius:"5px"}},MuiCardContent:{root:{padding:"".concat(pt.spacing(3),"px !important")}},MuiCardMedia:{root:{height:0,paddingTop:"56.25%",margin:"0 10% 0 10%"}},MuiDialog:{root:{margin:"".concat(pt.spacing(5),"px")},paperFullScreen:{backgroundColor:pt.palette.background.default}},MuiCardHeader:{root:{padding:pt.spacing(4),"& + .MuiCardContent-root":{paddingTop:"0 !important"}},title:Object(E.a)(Object(E.a)({},pt.typography.h6),{},{color:pt.palette.text.secondary}),action:{marginTop:0,marginRight:0,alignSelf:"center",display:"flex"}},MuiInputBase:{root:{borderRadius:"15px",height:"3.5em",width:"80%"}},MuiSvgIcon:{root:{fontSize:"30px"},fontSizeLarge:{fontSize:"50px"}},MuiButton:{root:{margin:"5px 5px 5px 0px"},sizeLarge:{height:"55px",opacity:6},outlinedSecondary:{backgroundColor:pt.palette.primary.main}},MuiAppBar:{root:{background:pt.palette.background.default},colorPrimary:{backgroundColor:pt.palette.background.default}},MuiAlert:{root:{marginTop:"15px"}}};var ft=pt;o.a.render(r.a.createElement(u.a,{theme:ft},r.a.createElement(s.a,null),r.a.createElement(i.a,null,r.a.createElement(l.a,{store:N},r.a.createElement(st,null)))),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.aa0a95d1.chunk.js.map